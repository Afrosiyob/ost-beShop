{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n\n    for (var p in s) {\n      if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n  }\n\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar types_1 = require(\"../../types\");\n\nvar initial_state_1 = require(\"../../initial-state\");\n\nvar initialUser = initial_state_1.default.currentUser;\n\nvar currentUser = function currentUser(state, action) {\n  if (state === void 0) {\n    state = initialUser;\n  }\n\n  switch (action.type) {\n    case types_1.REGISTRATION_REQUEST_SENT:\n    case types_1.VERIFY_TOKEN_REQUEST_SENT:\n    case types_1.SIGNIN_REQUEST_SENT:\n    case types_1.SIGNOUT_REQUEST_SENT:\n      return __assign({}, state, {\n        isLoading: true\n      });\n\n    case types_1.REGISTRATION_REQUEST_SUCCEEDED:\n    case types_1.VERIFY_TOKEN_REQUEST_SUCCEEDED:\n    case types_1.SIGNIN_REQUEST_SUCCEEDED:\n      var userAttributes = action.payload.userAttributes;\n      return __assign({}, state, {\n        attributes: __assign({}, userAttributes),\n        isLoading: false,\n        isSignedIn: true\n      });\n\n    case types_1.REGISTRATION_REQUEST_FAILED:\n    case types_1.VERIFY_TOKEN_REQUEST_FAILED:\n    case types_1.SIGNIN_REQUEST_FAILED:\n      return __assign({}, state, {\n        isLoading: false,\n        isSignedIn: false\n      });\n\n    case types_1.SIGNOUT_REQUEST_SUCCEEDED:\n      var userAttributeKeys = Object.keys(state.attributes);\n      var allNullUserAttributes = userAttributeKeys.reduce(function (accumulatedNullUserAttributes, currentUserAttributeKey) {\n        return __assign({}, accumulatedNullUserAttributes, (_a = {}, _a[currentUserAttributeKey] = null, _a));\n\n        var _a;\n      }, {});\n      return __assign({}, state, {\n        attributes: allNullUserAttributes,\n        isLoading: false,\n        isSignedIn: false\n      });\n\n    case types_1.SIGNOUT_REQUEST_FAILED:\n      return __assign({}, state, {\n        isLoading: false\n      });\n\n    default:\n      return state;\n  }\n};\n\nexports.default = currentUser;","map":{"version":3,"sources":["../../../src/reducers/current-user/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAA,OAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAiBA,IAAA,eAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;;AAGE,IAAA,WAAA,GAAA,eAAA,CAAA,OAAA,CAAA,WAAA;;AAGF,IAAM,WAAW,GAAG,SAAd,WAAc,CAAC,KAAD,EAA4B,MAA5B,EAA+C;AAA9C,MAAA,KAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,KAAA,GAAA,WAAA;AAAyB;;AAC5C,UAAQ,MAAM,CAAC,IAAf;AACE,SAAK,OAAA,CAAA,yBAAL;AACA,SAAK,OAAA,CAAA,yBAAL;AACA,SAAK,OAAA,CAAA,mBAAL;AACA,SAAK,OAAA,CAAA,oBAAL;AACE,aAAM,QAAA,CAAA,EAAA,EACD,KADC,EACI;AACR,QAAA,SAAS,EAAE;AADH,OADJ,CAAN;;AAIF,SAAK,OAAA,CAAA,8BAAL;AACA,SAAK,OAAA,CAAA,8BAAL;AACA,SAAK,OAAA,CAAA,wBAAL;AACU,UAAA,cAAA,GAAA,MAAA,CAAA,OAAA,CAAA,cAAA;AACR,aAAM,QAAA,CAAA,EAAA,EACD,KADC,EACI;AACR,QAAA,UAAU,EAAA,QAAA,CAAA,EAAA,EAAO,cAAP,CADF;AAER,QAAA,SAAS,EAAE,KAFH;AAGR,QAAA,UAAU,EAAE;AAHJ,OADJ,CAAN;;AAMF,SAAK,OAAA,CAAA,2BAAL;AACA,SAAK,OAAA,CAAA,2BAAL;AACA,SAAK,OAAA,CAAA,qBAAL;AACE,aAAM,QAAA,CAAA,EAAA,EACD,KADC,EACI;AACR,QAAA,SAAS,EAAE,KADH;AAER,QAAA,UAAU,EAAE;AAFJ,OADJ,CAAN;;AAKF,SAAK,OAAA,CAAA,yBAAL;AACE,UAAM,iBAAiB,GAAa,MAAM,CAAC,IAAP,CAAY,KAAK,CAAC,UAAlB,CAApC;AACA,UAAM,qBAAqB,GAAmB,iBAAiB,CAAC,MAAlB,CAC5C,UAAC,6BAAD,EAAgD,uBAAhD,EAA+E;AAC7E,eAAM,QAAA,CAAA,EAAA,EACD,6BADC,GAC4B,EAAA,GAAA,EAAA,EAAA,EAAA,CAC/B,uBAD+B,CAAA,GACL,IADK,EACD,EAF3B,EAAN;;;AAID,OAN2C,EAO5C,EAP4C,CAA9C;AASA,aAAM,QAAA,CAAA,EAAA,EACD,KADC,EACI;AACR,QAAA,UAAU,EAAE,qBADJ;AAER,QAAA,SAAS,EAAE,KAFH;AAGR,QAAA,UAAU,EAAE;AAHJ,OADJ,CAAN;;AAMF,SAAK,OAAA,CAAA,sBAAL;AACE,aAAM,QAAA,CAAA,EAAA,EACD,KADC,EACI;AACR,QAAA,SAAS,EAAE;AADH,OADJ,CAAN;;AAIF;AACE,aAAO,KAAP;AAlDJ;AAoDD,CArDD;;AAuDA,OAAA,CAAA,OAAA,GAAe,WAAf","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../../types\");\nvar initial_state_1 = require(\"../../initial-state\");\nvar initialUser = initial_state_1.default.currentUser;\nvar currentUser = function (state, action) {\n    if (state === void 0) { state = initialUser; }\n    switch (action.type) {\n        case types_1.REGISTRATION_REQUEST_SENT:\n        case types_1.VERIFY_TOKEN_REQUEST_SENT:\n        case types_1.SIGNIN_REQUEST_SENT:\n        case types_1.SIGNOUT_REQUEST_SENT:\n            return __assign({}, state, { isLoading: true });\n        case types_1.REGISTRATION_REQUEST_SUCCEEDED:\n        case types_1.VERIFY_TOKEN_REQUEST_SUCCEEDED:\n        case types_1.SIGNIN_REQUEST_SUCCEEDED:\n            var userAttributes = action.payload.userAttributes;\n            return __assign({}, state, { attributes: __assign({}, userAttributes), isLoading: false, isSignedIn: true });\n        case types_1.REGISTRATION_REQUEST_FAILED:\n        case types_1.VERIFY_TOKEN_REQUEST_FAILED:\n        case types_1.SIGNIN_REQUEST_FAILED:\n            return __assign({}, state, { isLoading: false, isSignedIn: false });\n        case types_1.SIGNOUT_REQUEST_SUCCEEDED:\n            var userAttributeKeys = Object.keys(state.attributes);\n            var allNullUserAttributes = userAttributeKeys.reduce(function (accumulatedNullUserAttributes, currentUserAttributeKey) {\n                return __assign({}, accumulatedNullUserAttributes, (_a = {}, _a[currentUserAttributeKey] = null, _a));\n                var _a;\n            }, {});\n            return __assign({}, state, { attributes: allNullUserAttributes, isLoading: false, isSignedIn: false });\n        case types_1.SIGNOUT_REQUEST_FAILED:\n            return __assign({}, state, { isLoading: false });\n        default:\n            return state;\n    }\n};\nexports.default = currentUser;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}